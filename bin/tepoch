#!/usr/bin/env ruby

require 'tepoch'
require 'optparse'

options = { :local => false, :milliseconds => false }
OptionParser.new do |opts|
  opts.banner = "Usage: tepoch [options"
  
  opts.on("--local", "Convert to local time") do |v|
    options[:local] = true
  end

  opts.on("--now", "Timestamp right now") do |v|
    options[:now] = true
  end

  opts.on("--days", "Timestamp right now") do |v|
    options[:days] = true
  end

  opts.on("--seconds", "Timestamp right now") do |v|
    options[:seconds] = true
  end

  opts.on("--minutes", "Timestamp right now") do |v|
    options[:minutes] = true
  end
  
  opts.on("--hours", "Timestamp right now") do |v|
    options[:hours] = true
  end

  opts.on("--milliseconds", "Timestamp right now") do |v|
    options[:milliseconds] = true
  end
end.parse!

if options[:now]
  puts Tepoch::Interface.timestamp_now(options[:milliseconds])
elsif options[:days]
  puts Tepoch::Interface.days_since_epoch(options[:local])
elsif options[:seconds]
  puts Tepoch::Interface.seconds_since_start_of_day(options[:local])
elsif options[:minutes]
  puts Tepoch::Interface.minutes_since_start_of_day(options[:local])
elsif options[:hours]
  puts Tepoch::Interface.hours_since_start_of_day(options[:local])
elsif ARGV[0]
  timestamp = ARGV[0].to_i
  puts Tepoch::Interface.timestamp_to_human_readable(timestamp, options[:local])
end


